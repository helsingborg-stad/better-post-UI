{"version":3,"file":"author.KxQm8imB.js","sources":["../../../source/js/author.js"],"sourcesContent":["const BetterPostUi = {};\nBetterPostUi.Author = (($) => {\n\tvar inputTimer = false;\n\tvar isTyping = false;\n\n\tfunction Author() {\n\t\t// Select author from list\n\t\t$(document).on(\n\t\t\t'click',\n\t\t\t'.better-post-ui-author-select li',\n\t\t\tfunction (e) {\n\t\t\t\tthis.setSelected(e.target);\n\t\t\t}.bind(this),\n\t\t);\n\n\t\t// Filter list of authors\n\t\t$('[name=\"better-post-ui-author-select-filter\"]').on(\n\t\t\t'input',\n\t\t\tfunction (e) {\n\t\t\t\tclearTimeout(inputTimer);\n\n\t\t\t\tinputTimer = setTimeout(\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\tvar query = $(e.target).closest(':input').val();\n\t\t\t\t\t\tthis.searchAuthor(query);\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\t300,\n\t\t\t\t);\n\t\t\t}.bind(this),\n\t\t);\n\t}\n\n\t/**\n\t * Sets a author as selected\n\t * @param {element} element The element to set selected\n\t */\n\tAuthor.prototype.setSelected = (element) => {\n\t\t$('.better-post-ui-author-select li.selected').removeClass('selected');\n\t\t$(element).closest('li').addClass('selected');\n\n\t\t$('[name=\"post_author_override\"]').val($(element).closest('li').attr('data-user-id'));\n\t};\n\n\tAuthor.prototype.searchAuthor = (q) => {\n\t\tvar $container = $('.better-post-ui-author-select');\n\n\t\tif (q.length === 0) {\n\t\t\t$container.html('');\n\t\t\treturn;\n\t\t}\n\n\t\t$container.html(\n\t\t\t'<li style=\"text-align:left;\"><span class=\"spinner\" style=\"visibility:visible;float:none;vertical-align:none;\"></span></li>',\n\t\t);\n\n\t\tvar data = {\n\t\t\taction: 'better_post_ui_author',\n\t\t\tq: q,\n\t\t\tpost_id: $('[name=\"post_ID\"]').val(),\n\t\t};\n\n\t\t$.post(\n\t\t\tajaxurl,\n\t\t\tdata,\n\t\t\t(res) => {\n\t\t\t\tvar html = '';\n\n\t\t\t\tif (res.length === 0) {\n\t\t\t\t\t$container.html('');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$.each(res, (index, user) => {\n\t\t\t\t\thtml = html + '<li data-user-id=\"' + user.ID + '\">';\n\n\t\t\t\t\tif (user.data.profile_image !== null && user.data.profile_image.lenght > 0) {\n\t\t\t\t\t\thtml =\n\t\t\t\t\t\t\thtml +\n\t\t\t\t\t\t\t'<div class=\"profile-image\" style=\"background-image:url(\\'' +\n\t\t\t\t\t\t\tuser.data.profile_image +\n\t\t\t\t\t\t\t'\\');\"></div>';\n\t\t\t\t\t} else {\n\t\t\t\t\t\thtml = html + '<div class=\"profile-image\"></div>';\n\t\t\t\t\t}\n\n\t\t\t\t\thtml = html + '<div class=\"profile-info\">';\n\t\t\t\t\thtml = html + '<span class=\"user-fullname\">' + user.data.first_name + ' ' + user.data.last_name + '</span>';\n\t\t\t\t\thtml = html + '<span class=\"user-login\">' + user.data.user_login + '</span>';\n\t\t\t\t\thtml = html + '</div>';\n\n\t\t\t\t\thtml = html + '</li>';\n\t\t\t\t});\n\n\t\t\t\t$container.html(html);\n\t\t\t},\n\t\t\t'JSON',\n\t\t);\n\t};\n\n\t/**\n\t * Filters the list of authors\n\t * @param  {string} query Filter query\n\t * @return {void}\n\t */\n\tAuthor.prototype.filterList = (query) => {\n\t\tif (query === '') {\n\t\t\t$('.better-post-ui-author-select li').show();\n\t\t\treturn;\n\t\t}\n\n\t\t$('.better-post-ui-author-select li:not(:contains(' + query + '))').hide();\n\t\t$('.better-post-ui-author-select li:contains(' + query + ')').show();\n\t};\n\n\treturn new Author();\n})(jQuery);\n\njQuery.expr[':'].contains = (a, i, m) => jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase()) >= 0;\n"],"names":[],"mappings":"iHACwB,GAAM,CAC7B,IAAI,WAAa,GAGjB,SAAS,QAAS,CAEjB,EAAE,QAAQ,EAAE,GACX,QACA,oCACA,SAAU,EAAG,CACZ,KAAK,YAAY,EAAE,MAAM,CAC1B,GAAE,KAAK,IAAI,CACd,EAGE,EAAE,8CAA8C,EAAE,GACjD,SACA,SAAU,EAAG,CACZ,aAAa,UAAU,EAEvB,WAAa,YACZ,UAAY,CACX,IAAI,MAAQ,EAAE,EAAE,MAAM,EAAE,QAAQ,QAAQ,EAAE,IAAG,EAC7C,KAAK,aAAa,KAAK,CACxB,GAAE,KAAK,IAAI,EACX,GACL,CACG,GAAE,KAAK,IAAI,CACd,CACC,CAzBS,+BA+BT,OAAO,UAAU,YAAe,SAAY,CAC3C,EAAE,2CAA2C,EAAE,YAAY,UAAU,EACrE,EAAE,OAAO,EAAE,QAAQ,IAAI,EAAE,SAAS,UAAU,EAE5C,EAAE,+BAA+B,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,IAAI,EAAE,KAAK,cAAc,CAAC,CACrF,EAEA,OAAO,UAAU,aAAgB,GAAM,CACtC,IAAI,WAAa,EAAE,+BAA+B,EAElD,GAAI,EAAE,SAAW,EAAG,CACnB,WAAW,KAAK,EAAE,EAClB,MACD,CAEA,WAAW,KACV,4HACH,EAEE,IAAI,KAAO,CACV,OAAQ,wBACR,EACA,QAAS,EAAE,kBAAkB,EAAE,IAAG,CACrC,EAEE,EAAE,KACD,QACA,KACC,KAAQ,CACR,IAAI,KAAO,GAEX,GAAI,IAAI,SAAW,EAAG,CACrB,WAAW,KAAK,EAAE,EAClB,MACD,CAEA,EAAE,KAAK,IAAK,CAAC,MAAO,OAAS,CAC5B,KAAO,KAAO,qBAAuB,KAAK,GAAK,KAE3C,KAAK,KAAK,gBAAkB,MAAQ,KAAK,KAAK,cAAc,OAAS,EACxE,KACC,KACA,2DACA,KAAK,KAAK,cACV,cAED,KAAO,KAAO,oCAGf,KAAO,KAAO,6BACd,KAAO,KAAO,+BAAiC,KAAK,KAAK,WAAa,IAAM,KAAK,KAAK,UAAY,UAClG,KAAO,KAAO,4BAA8B,KAAK,KAAK,WAAa,UACnE,KAAO,KAAO,SAEd,KAAO,KAAO,OACf,CAAC,EAED,WAAW,KAAK,IAAI,CACrB,EACA,MACH,CACC,EAOA,OAAO,UAAU,WAAc,OAAU,CACxC,GAAI,QAAU,GAAI,CACjB,EAAE,kCAAkC,EAAE,KAAI,EAC1C,MACD,CAEA,EAAE,kDAAoD,MAAQ,IAAI,EAAE,KAAI,EACxE,EAAE,6CAA+C,MAAQ,GAAG,EAAE,KAAI,CACnE,EAEO,IAAI,MACZ,GAAG,MAAM,EAET,OAAO,KAAK,GAAG,EAAE,SAAW,CAAC,EAAG,EAAG,IAAM,OAAO,CAAC,EAAE,KAAI,EAAG,YAAW,EAAG,QAAQ,EAAE,CAAC,EAAE,YAAW,CAAE,GAAK"}