{"version":3,"file":"order.Bs-Q6l0F.js","sources":["../../../source/js/order.js"],"sourcesContent":["const BetterPostUi = {};\nBetterPostUi.Order = (($) => {\n\tvar ajaxPostTimer;\n\tvar ajaxData;\n\n\tfunction Order() {\n\t\tthis.init();\n\n\t\t$('[data-action=\"better-post-ui-order-up\"]').on(\n\t\t\t'click',\n\t\t\tfunction (e) {\n\t\t\t\tvar li = $(e.target).parents('li').first()[0];\n\t\t\t\tthis.moveUp(li);\n\t\t\t}.bind(this),\n\t\t);\n\n\t\t$('[data-action=\"better-post-ui-order-down\"]').on(\n\t\t\t'click',\n\t\t\tfunction (e) {\n\t\t\t\tvar li = $(e.target).parents('li').first()[0];\n\t\t\t\tthis.moveDown(li);\n\t\t\t}.bind(this),\n\t\t);\n\t}\n\n\tOrder.prototype.init = function () {\n\t\t$('.better-post-ui-menu-order-list')\n\t\t\t.sortable({\n\t\t\t\tstop: (e, ui) => {\n\t\t\t\t\tBetterPostUi.Order.reindex();\n\t\t\t\t},\n\t\t\t})\n\t\t\t.bind(this);\n\t};\n\n\tOrder.prototype.moveUp = function (element) {\n\t\tvar current = $(element);\n\t\tcurrent.prev().before(current);\n\t\tthis.reindex();\n\t};\n\n\tOrder.prototype.moveDown = function (element) {\n\t\tvar current = $(element);\n\t\tcurrent.next().after(current);\n\t\tthis.reindex();\n\t};\n\n\tOrder.prototype.reindex = function () {\n\t\t$('.better-post-ui-menu-order-list')\n\t\t\t.find('li')\n\t\t\t.each(function (index, element) {\n\t\t\t\t$(this).find('[name*=\"menu_order\"]').val(index); // Sets default behaviour\n\t\t\t\t$(this).attr('data-order-id', index); // Async driven data\n\t\t\t});\n\n\t\tthis.asyncSave();\n\t};\n\n\tOrder.prototype.asyncSave = function () {\n\t\t//Clear timer\n\t\tclearTimeout(ajaxPostTimer);\n\n\t\t//Var declerations\n\t\tvar pageOrder = [];\n\n\t\t//Get new data\n\t\t$('.better-post-ui-menu-order-list')\n\t\t\t.find('li')\n\t\t\t.each((index, element) => {\n\t\t\t\tpageOrder[index] = { postId: $(element).attr('data-post-id'), orderId: $(element).attr('data-order-id') };\n\t\t\t});\n\n\t\t//Define data post object\n\t\tthis.ajaxData = {\n\t\t\taction: 'better_post_ui_order_pages',\n\t\t\tjsonPageOrder: JSON.stringify(pageOrder),\n\t\t};\n\n\t\t//Delay the actual sending of the ajax, in case of further changes by the user\n\t\tajaxPostTimer = window.setTimeout(\n\t\t\tfunction () {\n\t\t\t\t$.post(ajaxurl, this.ajaxData, (response) => {});\n\t\t\t}.bind(this),\n\t\t\t700,\n\t\t);\n\t};\n\n\treturn new Order();\n})(jQuery);\n"],"names":[],"mappings":"gHAAA,MAAM,aAAe,CAAA,EACrB,aAAa,OAAU,GAAM,CAC5B,IAAI,cAGJ,SAAS,OAAQ,CAChB,KAAK,KAAI,EAET,EAAE,yCAAyC,EAAE,GAC5C,SACA,SAAU,EAAG,CACZ,IAAI,GAAK,EAAE,EAAE,MAAM,EAAE,QAAQ,IAAI,EAAE,MAAK,EAAG,CAAC,EAC5C,KAAK,OAAO,EAAE,CACf,GAAE,KAAK,IAAI,CACd,EAEE,EAAE,2CAA2C,EAAE,GAC9C,SACA,SAAU,EAAG,CACZ,IAAI,GAAK,EAAE,EAAE,MAAM,EAAE,QAAQ,IAAI,EAAE,MAAK,EAAG,CAAC,EAC5C,KAAK,SAAS,EAAE,CACjB,GAAE,KAAK,IAAI,CACd,CACC,CAlBS,6BAoBT,MAAM,UAAU,KAAO,UAAY,CAClC,EAAE,iCAAiC,EACjC,SAAS,CACT,KAAM,QAAC,EAAG,KAAO,CAChB,aAAa,MAAM,QAAO,CAC3B,EAFM,OAGV,CAAI,EACA,KAAK,IAAI,CACZ,EAEA,MAAM,UAAU,OAAS,SAAU,QAAS,CAC3C,IAAI,QAAU,EAAE,OAAO,EACvB,QAAQ,KAAI,EAAG,OAAO,OAAO,EAC7B,KAAK,QAAO,CACb,EAEA,MAAM,UAAU,SAAW,SAAU,QAAS,CAC7C,IAAI,QAAU,EAAE,OAAO,EACvB,QAAQ,KAAI,EAAG,MAAM,OAAO,EAC5B,KAAK,QAAO,CACb,EAEA,MAAM,UAAU,QAAU,UAAY,CACrC,EAAE,iCAAiC,EACjC,KAAK,IAAI,EACT,KAAK,SAAU,MAAO,QAAS,CAC/B,EAAE,IAAI,EAAE,KAAK,sBAAsB,EAAE,IAAI,KAAK,EAC9C,EAAE,IAAI,EAAE,KAAK,gBAAiB,KAAK,CACpC,CAAC,EAEF,KAAK,UAAS,CACf,EAEA,MAAM,UAAU,UAAY,UAAY,CAEvC,aAAa,aAAa,EAG1B,IAAI,UAAY,CAAA,EAGhB,EAAE,iCAAiC,EACjC,KAAK,IAAI,EACT,KAAK,CAAC,MAAO,UAAY,CACzB,UAAU,KAAK,EAAI,CAAE,OAAQ,EAAE,OAAO,EAAE,KAAK,cAAc,EAAG,QAAS,EAAE,OAAO,EAAE,KAAK,eAAe,CAAC,CACxG,CAAC,EAGF,KAAK,SAAW,CACf,OAAQ,6BACR,cAAe,KAAK,UAAU,SAAS,CAC1C,EAGE,cAAgB,OAAO,YACtB,UAAY,CACX,EAAE,KAAK,QAAS,KAAK,SAAW,UAAa,CAAC,CAAC,CAChD,GAAE,KAAK,IAAI,EACX,GACH,CACC,EAEO,IAAI,KACZ,GAAG,MAAM"}