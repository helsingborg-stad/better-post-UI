var BetterPostUi={};BetterPostUi=BetterPostUi||{},BetterPostUi.Components=BetterPostUi.Components||{},BetterPostUi.Components.Author=function(t){function e(){t(document).on("click",".better-post-ui-author-select li",function(t){this.setSelected(t.target)}.bind(this)),t('[name="better-post-ui-author-select-filter"]').on("input",function(e){clearTimeout(i),i=setTimeout(function(){var i=t(e.target).closest(":input").val();this.searchAuthor(i)}.bind(this),300)}.bind(this))}var i=!1;return e.prototype.setSelected=function(e){t(".better-post-ui-author-select li.selected").removeClass("selected"),t(e).closest("li").addClass("selected"),t('[name="post_author_override"]').val(t(e).closest("li").attr("data-user-id"))},e.prototype.searchAuthor=function(e){var i=t(".better-post-ui-author-select");if(0===e.length)return void i.html("");i.html('<li style="text-align:left;"><span class="spinner" style="visibility:visible;float:none;vertical-align:none;"></span></li>');var a={action:"better_post_ui_author",q:e,post_id:t('[name="post_ID"]').val()};t.post(ajaxurl,a,function(e){var a="";return 0===e.length?void i.html(""):(t.each(e,function(t,e){a=a+'<li data-user-id="'+e.ID+'">',null!==e.data.profile_image&&e.data.profile_image.lenght>0?a=a+'<div class="profile-image" style="background-image:url(\''+e.data.profile_image+"');\"></div>":a+='<div class="profile-image"></div>',a+='<div class="profile-info">',a=a+'<span class="user-fullname">'+e.data.first_name+" "+e.data.last_name+"</span>",a=a+'<span class="user-login">'+e.data.user_login+"</span>",a+="</div>",a+="</li>"}),void i.html(a))},"JSON")},e.prototype.filterList=function(e){return""===e?void t(".better-post-ui-author-select li").show():(t(".better-post-ui-author-select li:not(:contains("+e+"))").hide(),void t(".better-post-ui-author-select li:contains("+e+")").show())},new e}(jQuery),jQuery.expr[":"].contains=function(t,e,i){return jQuery(t).text().toUpperCase().indexOf(i[3].toUpperCase())>=0},BetterPostUi=BetterPostUi||{},BetterPostUi.Components=BetterPostUi.Components||{},BetterPostUi.Components.Order=function(t){function e(){this.init(),t('[data-action="better-post-ui-order-up"]').on("click",function(e){var i=t(e.target).parents("li").first()[0];this.moveUp(i)}.bind(this)),t('[data-action="better-post-ui-order-down"]').on("click",function(e){var i=t(e.target).parents("li").first()[0];this.moveDown(i)}.bind(this))}var i;return e.prototype.init=function(){t(".better-post-ui-menu-order-list").sortable({stop:function(t,e){BetterPostUi.Components.Order.reindex()}}).bind(this)},e.prototype.moveUp=function(e){var i=t(e);i.prev().before(i),this.reindex()},e.prototype.moveDown=function(e){var i=t(e);i.next().after(i),this.reindex()},e.prototype.reindex=function(){t(".better-post-ui-menu-order-list").find("li").each(function(e,i){t(this).find('[name*="menu_order"]').val(e),t(this).attr("data-order-id",e)}),this.asyncSave()},e.prototype.asyncSave=function(){clearTimeout(i);var e=[];t(".better-post-ui-menu-order-list").find("li").each(function(i,a){e[i]={postId:t(a).attr("data-post-id"),orderId:t(a).attr("data-order-id")}}),this.ajaxData={action:"better_post_ui_order_pages",jsonPageOrder:JSON.stringify(e)},i=window.setTimeout(function(){t.post(ajaxurl,this.ajaxData,function(t){alert("Got this from the server: "+t)})}.bind(this),700)},new e}(jQuery),BetterPostUi=BetterPostUi||{},BetterPostUi.Components=BetterPostUi.Components||{},BetterPostUi.Components.Parent=function(t){function e(){t('[data-action="better-post-ui-parent-show-all"]').on("click",function(t){t.preventDefault(),this.showList()}.bind(this)),t('[data-action="better-post-ui-parent-show-search"]').on("click",function(t){t.preventDefault(),this.showSearch()}.bind(this)),t('[data-action="better-post-ui-parent-search"]').on("input",function(e){clearTimeout(i),i=setTimeout(function(){this.search(t(e.target).closest('[data-action="better-post-ui-parent-search"]').val())}.bind(this),300)}.bind(this)),t(document).on("click","[data-better-post-ui-set-parent-id]",function(e){var i=t(e.target).closest("[data-better-post-ui-set-parent-id]"),a=i.attr("data-better-post-ui-set-parent-id"),o=i.text();this.setParent(a,o)}.bind(this))}var i;return e.prototype.showList=function(){t(".better-post-ui-parent-search").hide(),t(".better-post-ui-parent-list").show()},e.prototype.showSearch=function(){t(".better-post-ui-parent-list").hide(),t(".better-post-ui-parent-search").show()},e.prototype.setParent=function(e,i){t('[data-action="better-post-ui-parent-search"]').val(""),t(".better-post-ui-search-parent-list").remove(),t(".better-post-ui-parent-list #parent_id").val(e),this.showList()},e.prototype.search=function(e,a){clearTimeout(i),t(".better-post-ui-search-parent-list").remove(),""!==e&&t.post(ajaxurl,{action:"better_post_ui_search_parent",query:e,postType:t('[name="post_type"]').val()},function(e){clearTimeout(i),t('[data-action="better-post-ui-parent-search"]').after('<ul class="better-post-ui-search-parent-list"></ul>'),t.each(e,function(e,i){t(".better-post-ui-search-parent-list").append('<li data-better-post-ui-set-parent-id="'+i.ID+'">                    '+i.post_title+"                </li>")})},"JSON")},new e}(jQuery),BetterPostUi=BetterPostUi||{},BetterPostUi.Components=BetterPostUi.Components||{},BetterPostUi.Components.Publish=function(t){function e(){0!==t("#misc-publishing-actions").length&&(this.initDatepicker(),this.handleEvents())}return e.prototype.handleEvents=function(){t(".save-timestamp","#timestampdiv").on("click",function(e){var i,a,o=t("#post-visibility-select").find("input:radio:checked").val(),n=t("#aa").val(),r=t("#mm").val(),s=t("#jj").val(),p=t("#hh").val(),c=t("#mn").val();i=new Date(n,r-1,s,p,c),a=new Date(t("#cur_aa").val(),t("#cur_mm").val()-1,t("#cur_jj").val(),t("#cur_hh").val(),t("#cur_mn").val()),i>a&&"private"==o&&setTimeout(function(){t("#publish").val(postL10n.schedule)},10)})},e.prototype.initDatepicker=function(){t("#aa, #mm, #jj").hide();var e=t(".misc-pub-curtime .timestamp-wrap").html();e=e.replace(/(,|@)/g,""),t(".misc-pub-curtime .timestamp-wrap").html(e),t("#hh").before('<span class="municipio-admin-datepicker-time dashicons dashicons-clock"></span>'),t("#timestampdiv").prepend('<div id="timestamp-datepicker" class="municipio-admin-datepicker"></div>'),t("#timestamp-datepicker").datepicker({firstDay:1,dateFormat:"yy-mm-dd",onSelect:function(e){e=e.split("-"),t("#aa").val(e[0]),t("#mm").val(e[1]),t("#jj").val(e[2])}});var i=t("#aa").val()+"-"+t("#mm").val()+"-"+t("#jj").val();t("#timestamp-datepicker").datepicker("setDate",i)},new e}(jQuery);